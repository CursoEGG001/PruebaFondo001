<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Matriz con Zipf y Benford</title>
        <style>
            body {
                margin: 0;
                padding: 0;
                text-shadow: 1px 1px 0px #fff, -1px -1px 0px #fff, 1px -1px 0px #fff, -1px 1px 0px #fff;
            }

            canvas {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                z-index: -1
            }
        </style>
    </head>
    <body>
        <label>Ingrese un texto aquí</label>
        <textarea id="input" rows="10"></textarea>
        <button id="boton">Ingresar</button>
        <script>
            // Obtiene las frecuencias de las palabras en el texto usando la ley de Zipf
            function obtenerFrecuenciasZipf(texto) {
                const palabras = texto.toLowerCase().split(/\s+/);
                const freq = new Map();
                for (const palabra of palabras) {
                    freq.set(palabra, (freq.get(palabra) || 0) + 1);
                }
                return [...freq.entries()].sort((a, b) => b[1] - a[1]);
            }

            // Obtiene las frecuencias de los dígitos en el texto usando la ley de Benford
            function obtenerFrecuenciasBenford(texto) {
                const numeros = texto.replace(/[^0-9]/g, "");
                const freq = new Array(10).fill(0);
                for (const digito of numeros) {
                    freq[digito]++;
                }
                return freq.map((f) => f / numeros.length);
            }

            // Crea una matriz con los valores de Zipf y Benford
            function crearMatriz(frecuenciasZipf, frecuenciasBenford) {
                const n = frecuenciasZipf.length;
                const matriz = new Array(n);
                for (let i = 0; i < n; i++) {
                    matriz[i] = new Array(n);
                    for (let j = 0; j < n; j++) {
                        const valorZipf = frecuenciasZipf[(i + j) % n][1];
                        const valorBenford = frecuenciasBenford[(i * j) % 10];
                        matriz[i][j] = valorZipf * valorBenford;
                    }
                }
                return matriz;
            }

            // Muestra la matriz en un canvas que se usará como fondo de página
            function mostrarMatriz(matriz) {
                const canvas = document.createElement("canvas");
                document.body.appendChild(canvas);

                const ctx = canvas.getContext("2d");
                const n = matriz.length;
                const width = canvas.width / n;
                const height = canvas.height / n;
                for (let i = 0; i < n; i++) {
                    for (let j = 0; j < n; j++) {
                        const valor = matriz[i][j];
                        ctx.fillStyle = `rgb(${Math.floor(valor * 255)}, ${Math.floor(valor * 255)}, ${Math.floor(valor * 255)})`;
                        ctx.fillRect(j * width, i * height, width, height);
                    }
                }
            }

            // Obtiene las frecuencias de las palabras en el texto usando la ley de Zipf
            function obtenerFrecuenciasZipf(texto) {
                const palabras = texto.toLowerCase().split(/\s+/);
                const freq = new Map();
                for (const palabra of palabras) {
                    freq.set(palabra, (freq.get(palabra) || 0) + 1);
                }
                return [...freq.entries()].sort((a, b) => b[1] - a[1]);
            }

            // Obtiene las frecuencias de los dígitos en el texto usando la ley de Benford
            function obtenerFrecuenciasBenford(texto) {
                const numeros = texto.replace(/[^0-9]/g, "");
                const freq = new Array(10).fill(0);
                for (const digito of numeros) {
                    freq[digito]++;
                }
                return freq.map((f) => f / numeros.length);
            }

            // Crea una matriz con los valores de Zipf y Benford
            function crearMatriz(frecuenciasZipf, frecuenciasBenford) {
                const n = frecuenciasZipf.length;
                const matriz = new Array(n);
                for (let i = 0; i < n; i++) {
                    matriz[i] = new Array(n);
                    for (let j = 0; j < n; j++) {
                        const valorZipf = frecuenciasZipf[(i + j) % n][1];
                        const valorBenford = frecuenciasBenford[(i * j) % 10];
                        matriz[i][j] = valorZipf * valorBenford;
                    }
                }
                return matriz;
            }

            // Muestra la matriz en un canvas que se usará como fondo de página
            function mostrarMatriz(matriz) {
                const canvas = document.createElement("canvas");
                document.body.appendChild(canvas);

                const ctx = canvas.getContext("2d");
                const n = matriz.length;
                const width = canvas.width / n;
                const height = canvas.height / n;
                for (let i = 0; i < n; i++) {
                    for (let j = 0; j < n; j++) {
                        const valor = matriz[i][j];
                        const valorAleatorio1 = (valor) => Math.random() < 0.5 ? 0 : valor;
                        const valorAleatorio2 = (valor) => Math.random() < 0.5 ? 0 : valor;
                        const valorAleatorio3 = (valor) => Math.random() < 0.5 ? 0 : valor;
                        ctx.fillStyle = `rgb(${Math.floor(valorAleatorio1 * 255)}, ${Math.floor(valorAleatorio2 * 255)}, ${Math.floor(valorAleatorio3 * 255)})`;
                        ctx.fillRect(j * width, i * height, width, height);
                    }
                }
            }

            // Obtiene el texto del área de texto y crea y muestra la matriz
            function generarMatriz() {
                const texto = document.getElementById("input").value;
                const frecuenciasZipf = obtenerFrecuenciasZipf(texto);
                const frecuenciasBenford = obtenerFrecuenciasBenford(texto);
                const matriz = crearMatriz(frecuenciasZipf, frecuenciasBenford);
                mostrarMatriz(matriz);
            }

            // Agrega un evento al botón para generar la matriz
            const boton = document.getElementById("boton");
            boton.addEventListener("click", generarMatriz);

        </script>
    </body>
</html>
