<!DOCTYPE html>
<html lang="es">
    <head>
        <title>Matriz Zipf y Benford </title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <style>
            body {
                margin: 0;
                padding: 0;
                overflow: hidden;
                display: flex;
                justify-content: center;
                align-items: center;
                height: 100vh;
                text-shadow: 1px 1px 3px rgba(255, 255, 255, 0.85);
            }
            #container {
                display: flex;
                flex-direction: column;
                align-items: center;
            }
            #input {
                width: 80vw;
                height: 10vh;
                margin: 10px;
                font-size: 1.2rem;
            }
            #button {
                padding: 10px 20px;
                font-size: 1.2rem;
                background-color: #2196F3;
                color: #fff;
                border: none;
                border-radius: 5px;
                cursor: pointer;
            }
            canvas {
                position: absolute;
                top: 0;
                left: 0;
                width: 100vw;
                height: 100vh;
                z-index: -1;
            }
        </style>
    </head>
    <body>
        <div id="container">
            <label for="input">Ingrese una frase:</label>
            <textarea id="input" aria-labelledby="input">Texto para generar Matriz</textarea>
            <button id="boton" onclick="generarMatriz()" aria-label="Generar matriz">Generar matriz</button>
            <canvas id="canvas" aria-hidden="true"></canvas>
        </div>
        <script>
            // Obtiene las frecuencias de las palabras en el texto usando la ley de Zipf
            function obtenerFrecuenciasZipf(texto) {
                const palabras = texto.toLowerCase().split(/\s+/);
                const freq = new Map();
                for (const palabra of palabras) {
                    freq.set(palabra, (freq.get(palabra) || 0) + 1);
                }
                return [...freq.entries()].sort((a, b) => b[1] - a[1]);
            }

            // Obtiene las frecuencias de los dígitos en el texto usando la ley de Benford
            function obtenerFrecuenciasBenford(texto) {
                const numeros = texto.replace(/[^0-9]/g, "");
                const freq = new Array(10).fill(0);
                for (const digito of numeros) {
                    freq[digito]++;
                }
                return freq.map((f) => f / numeros.length);
            }

            // Crea una matriz con los valores de Zipf y Benford
            function crearMatriz(frecuenciasZipf, frecuenciasBenford) {
                const n = frecuenciasZipf.length;
                const matriz = new Array(n);
                for (let i = 0; i < n; i++) {
                    matriz[i] = new Array(n);
                    for (let j = 0; j < n; j++) {
                        const valorZipf = frecuenciasZipf[(i + j) % n][1];
                        const valorBenford = frecuenciasBenford[(i * j) % 10];
                        matriz[i][j] = valorZipf * valorBenford;
                    }
                }
                return matriz;
            }

            // Muestra la matriz en un canvas que se usará como fondo de página
            function mostrarMatriz(matriz) {
                const canvas = document.createElement("canvas");
                document.body.appendChild(canvas);

                const ctx = canvas.getContext("2d");
                const n = matriz.length;
                const width = canvas.width / n;
                const height = canvas.height / n;
                for (let i = 0; i < n; i++) {
                    for (let j = 0; j < n; j++) {
                        const valor = matriz[i][j];
                        ctx.fillStyle = `rgb(${Math.floor(valor * 255)}, ${Math.floor(valor * 255)}, ${Math.floor(valor * 255)})`;
                        ctx.fillRect(j * width, i * height, width, height);
                    }
                }
            }

            // Obtiene las frecuencias de las palabras en el texto usando la ley de Zipf
            function obtenerFrecuenciasZipf(texto) {
                const palabras = texto.toLowerCase().split(/\s+/);
                const freq = new Map();
                for (const palabra of palabras) {
                    freq.set(palabra, (freq.get(palabra) || 0) + 1);
                }
                return [...freq.entries()].sort((a, b) => b[1] - a[1]);
            }

            // Obtiene las frecuencias de los dígitos en el texto usando la ley de Benford
            function obtenerFrecuenciasBenford(texto) {
                const numeros = texto.replace(/[^0-9]/g, "");
                const freq = new Array(10).fill(0);
                for (const digito of numeros) {
                    freq[digito]++;
                }
                return freq.map((f) => f / numeros.length);
            }

            // Crea una matriz con los valores de Zipf y Benford
            function crearMatriz(frecuenciasZipf, frecuenciasBenford) {
                const n = frecuenciasZipf.length;
                const matriz = new Array(n);
                for (let i = 0; i < n; i++) {
                    matriz[i] = new Array(n);
                    for (let j = 0; j < n; j++) {
                        const valorZipf = frecuenciasZipf[(i + j) % n][1];
                        const valorBenford = frecuenciasBenford[(i * j) % 10];
                        matriz[i][j] = valorZipf * valorBenford;
                    }
                }
                return matriz;
            }

            // Muestra la matriz en un canvas que se usará como fondo de página
            function mostrarMatriz(matriz) {
                const canvas = document.createElement("canvas");
                document.body.appendChild(canvas);

                const ctx = canvas.getContext("2d");
                const n = matriz.length;
                const width = canvas.width / n;
                const height = canvas.height / n;
                for (let i = 0; i < n; i++) {
                    for (let j = 0; j < n; j++) {
                        const valor = matriz[i][j];
                        const valorAleatorio1 = (valor) => Math.random() < 0.5 ? 0 : valor;
                        const valorAleatorio2 = (valor) => Math.random() < 0.5 ? 0 : valor;
                        const valorAleatorio3 = (valor) => Math.random() < 0.5 ? 0 : valor;
                        ctx.fillStyle = `rgb(${Math.floor(valorAleatorio1 * 255)}, ${Math.floor(valorAleatorio2 * 255)}, ${Math.floor(valorAleatorio3 * 255)})`;
                        ctx.fillRect(j * width, i * height, width, height);
                    }
                }
            }

            // Obtiene el texto del área de texto y crea y muestra la matriz
            function generarMatriz() {
                const texto = document.getElementById("input").value;
                const frecuenciasZipf = obtenerFrecuenciasZipf(texto);
                const frecuenciasBenford = obtenerFrecuenciasBenford(texto);
                const matriz = crearMatriz(frecuenciasZipf, frecuenciasBenford);
                mostrarMatriz(matriz);
            }

            // Agrega un evento al botón para generar la matriz
            const boton = document.getElementById("boton");
            boton.addEventListener("click", generarMatriz);

        </script>
    </body>
</html>
