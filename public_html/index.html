
<html>
    <head>
        <title>Zipf and Benford Matrices</title>
        <style>
            body {
                margin: 0;
                padding: 0;
                overflow: hidden;
                text-shadow: 1px 2px 2px whitesmoke;
            }
            canvas {
                position: fixed;
                top: 0;
                left: 0;
                width: 100vw;
                height: 100vh;
                z-index: -1;
            }

            .container {
                display: flex;
                align-items: center;
                justify-content: center;
                height: 100vh;
            }

            textarea {
                width: 80%;
                height: 50%;
            }


        </style>
    </head>
    <body> 
        <canvas id="canvas"></canvas>

        <div class="container">
            <label for="input">Ingrese una frase:</label>
            <textarea id="input" rows="5" cols="50"></textarea>
            <button onclick="generarMatriz()">Generar matriz</button>
        </div>
        <script>
            function generarMatriz() {
                const frase = document.getElementById("input").value;
                const freq = obtenerFrecuencias(frase);
                const sortedWords = ordenarPalabras(freq);
                const valores = asignarValores(sortedWords);
                const matriz = crearMatriz(valores);
                mostrarMatriz(matriz);
            }

            function obtenerFrecuencias(frase) {
                const palabras = frase.split(" ");
                const freq = new Map();
                for (const palabra of palabras) {
                    freq.set(palabra, (freq.get(palabra) || 0) + 1);
                }
                return freq;
            }

            function ordenarPalabras(freq) {
                const sortedWords = [...freq.entries()].sort((a, b) => b[1] - a[1]);
                return sortedWords;
            }

            function asignarValores(sortedWords) {
                const valores = [];
                for (let i = 0; i < sortedWords.length; i++) {
                    const frecuencia = sortedWords[i][1];
                    valores.push(Math.log10(1 + 1 / frecuencia));
                }
                return valores;
            }

            function crearMatriz(valores) {
                const n = valores.length;
                const matriz = new Array(n);
                for (let i = 0; i < n; i++) {
                    matriz[i] = new Array(n);
                    for (let j = 0; j < n; j++) {
                        const index = (i + j) % n;
                        matriz[i][j] = valores[index];
                    }
                }
                return matriz;
            }

            function mostrarMatriz(matriz) {
                const canvas = document.getElementById("canvas");
                const ctx = canvas.getContext("2d");
                const n = matriz.length;
                const width = canvas.width / n;
                const height = canvas.height / n;
                for (let i = 0; i < n; i++) {
                    for (let j = 0; j < n; j++) {
                        const valor = matriz[i][j];
                        const valorAleatorio1 = ((valor) => Math.random() < 0.5 ? 0 : valor);
                        const valorAleatorio2 = ((valor) => Math.random() < 0.5 ? 0 : valor);
                        const valorAleatorio3 = ((valor) => Math.random() < 0.5 ? 0 : valor);

                        ctx.fillStyle = `rgb(${Math.floor(valorAleatorio1 * 255)}, ${Math.floor(valorAleatorio2 * 255)}, ${Math.floor(valorAleatorio3 * 255)})`;
                        ctx.fillRect(j * width, i * height, width, height);
                    }
                }
            }
        </script>
    </body>
</html>
